<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <!--<changeSet author="am" id="database-drop-ingredient">-->
        <!--<sql>-->
            <!--drop table ingredient if exists-->
        <!--</sql>-->
    <!--</changeSet>-->
    <!--<changeSet author="am" id="database-drop-recipe">-->
        <!--<sql>-->
            <!--drop table recipe if exists-->
        <!--</sql>-->
    <!--</changeSet>-->
    <!--<changeSet author="am" id="database-drop-recipe_ingredient">-->
        <!--<sql>-->
            <!--drop table recipe_ingredient if exists-->
        <!--</sql>-->
    <!--</changeSet>-->

    <changeSet author="am" id="database-ingredient">
        <sql>
            create table IF NOT EXISTS ingredient (
            id BIGINT generated by default as identity,
            name varchar2(255) not null,
            primary key (id),

            <!--constraint uqi_name unique(name)-->
            )

            <!--create table IF NOT EXISTS ingredient (-->
            <!--id bigint generated by default as identity,-->
            <!--name varchar(255) not null,-->
            <!--primary key (id)-->
            <!--)-->

            <!--alter table ingredient-->
            <!--add constraint UK_bcuaj97y3iu3t2vj26jg6hijj unique (name);-->
        </sql>
    </changeSet>
    <changeSet author="am" id="database-recipe">
        <sql>
            create table IF NOT EXISTS recipe (
            id bigint generated by default as identity,
            name varchar(255) not null,
            description varchar(255),
            primary key (id),

            <!--constraint uqr_name unique(name)-->
            )

            <!--create table IF NOT EXISTS recipe (-->
            <!--id bigint generated by default as identity,-->
            <!--description varchar(255),-->
            <!--name varchar(255) not null,-->
            <!--primary key (id)-->
            <!--)-->

            <!--alter table recipe-->
            <!--add constraint UK_rm1mlratj8yf3e1yxwk156x4p unique (name);-->
        </sql>
    </changeSet>
    <changeSet author="am" id="database-recipe_ingredient">
        <sql>
            create table IF NOT EXISTS recipe_ingredient (
            id bigint generated by default as identity,
            recipe_id bigint,
            ingredient_id bigint,
            count bigint,
            primary key (id)<!--,-->

            <!--FOREIGN KEY (recipe_id) REFERENCES recipe(id),-->
            <!--FOREIGN KEY (ingredient_id) REFERENCES Ingredient(id),-->
            <!--UNIQUE(recipe_id,ingredient_id)-->
            )

            <!--create table IF NOT EXISTS recipe_ingredient (-->
            <!--id bigint generated by default as identity,-->
            <!--count bigint,-->
            <!--ingredient_id bigint,-->
            <!--recipe_id bigint,-->
            <!--primary key (id)-->
            <!--);-->

            <!--alter table recipe_ingredient-->
            <!--add constraint UK_58ocuab26seiw3rx6gd3eh4dn unique (recipe_id, ingredient_id);-->

            <!--alter table recipe_ingredient-->
            <!--add constraint FK_tmcdw7h1sgbnmr3tab1ccbb49-->
            <!--foreign key (ingredient_id)-->
            <!--references ingredient;-->

            <!--alter table recipe_ingredient-->
            <!--add constraint FK_thghmqhlim0p7i6auo6kfmxwo-->
            <!--foreign key (recipe_id)-->
            <!--references recipe-->
        </sql>
    </changeSet>

    <!--<changeSet  author="am" id="database-4">-->
    <!--<sqlFile path="sql/fillIngredient.sql"/>-->
    <!--</changeSet>-->
    <!--<changeSet  author="am" id="database-5">-->
    <!--<sqlFile path="sql/fillRecipe.sql"/>-->
    <!--</changeSet>-->
    <!--<changeSet  author="am" id="database-6">-->
    <!--<sqlFile path="sql/fillTable.sql"/>-->
    <!--</changeSet>-->

</databaseChangeLog>